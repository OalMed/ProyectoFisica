
<html lang='es'>
    <head>
        <title>Conversiones</title>
        <link rel="stylesheet" href="CSS/conversion.css">
    </head>
    <body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

        <div class="container">
            <h1 class="text-center">CONVERSION DE UNIDADES</h1>
            <br>
            <section class="row">
                <span class="col-6 text-rigth">Unidades de Medida:</span>
                
                <select class="col-4" name="UnidadesMedida" id="">
                    <option >Rapidez</option>
                    <option >Longitud</option>
                    <option >Area</option>
                    <option >Volumen</option>
                    <option >Tiempo</option>
                    <option >Angulo</option>
                    <option >Rapidez</option>
                    <option >Aceleracion</option>
                    <option >Masa</option>
                    <option >Fuerza</option>
                    <option >Presion</option>
                    <option >Energia</option>
                    <option >Masa-energia</option>
                    <option >Potencia</option>
                </select>
            </section>
            <br><br><br>

            <section class="row">
                <!-- columna 1 -->
                <!-- <span class="col-md-2 col-1"></span> -->
                <span class="col-md-5 col-12">
                    <div class="row">
                        <select name="select1" class="col-12 mainSelect" data-target="simbolo1" data-posicion="1">
                            <option >...</option>
                        </select>
                        <select name="selSup1" class="SelectSoporte col-6" data-target="simbolo1" data-posicion="2"></select>
                        <input type="text" data-target="simbolo1" class="col-9 input Active" placeholder="Unidad Base" >
                        <input name="simbolo1" type="text" class="col-3" disabled>
                    </div>
                </span>

                <!-- centro -->
                <span class="col-1 col-sm-2 simbolo-flechas">
                    <img id="soporte2" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRybwLN4PoxBg-XCAm89zK3jJVzdm57riIni7XE5KVQBQ&s" alt="">
                </span>
                
                <span class="col-1" id="soporte"></span>
                <!-- columna 2 -->
                <span class="col-md-5 col-12">
                    <div class="row">
                        <select name="select2" class="col-12 mainSelect" data-target="simbolo2" data-posicion="1" id="">
                            <option >...</option>
                        </select>
                        <select name="selSup2" class="SelectSoporte col-6" data-target="simbolo2" data-posicion="2"></select>
                        <input type="text" data-target="simbolo2" class="col-9 input" placeholder="Unidad Destino">
                        <input name="simbolo2" type="text" class="col-3" disabled>
                    </div>
                </span>
                
                <!-- boton de Convertir -->
                <!-- <span class="col-4"></span> -->
                <div class="boton text-center col-4">Convertir</div>                    

            </section>

        </div>
    </body>


    <script src="JS/invertir_conversion.js"></script>
    <script src="JS/elevaciones.js"></script>
    <script src="JS/factores_conv.js"></script>
    <script src="JS/selects.js"></script>    

    <script>
        window.razones=new Array(4);
        window.exponentes=new Array(4);

        let selects;
        let factores,targ;

        let uni=document.getElementsByName('UnidadesMedida')[0]
        // uni.anterior=null
        
        selects=document.querySelectorAll('.mainSelect, .SelectSoporte')
        for(let index=0;index<selects.length;index++){
            console.log('___',selects[index]);
            // console.log(selects[index].checkVisibility());
            selects[index].anterior=null
            selects[index].addEventListener('change',escribirSimbolos)
            // selects[index].dispatchEvent(new Event('change'))
        }

        uni.addEventListener('change',cambiarSelects)
        
        uni.dispatchEvent(new Event('change'))      
        
        centrar_options()

        function busacarClase(inputs,clase){
            for(let indexClass=0;indexClass<inputs.length;indexClass++){
                if(inputs[indexClass].classList.contains(clase)){
                    return indexClass   
                }
            }
            return false
        }
        let inputs;
        let pasado;

        function conversionAuto(){
            inputs=document.getElementsByClassName('input')

            for(let index=0;index<inputs.length;index++){
                inputs[index].onclick=function(){
                    let activo=document.getElementsByClassName('Active')[0]
                    if(activo==this){
                        console.log('RETURN');
                        return
                    }
                    activo.classList.remove('Active')

                    this.classList.add('Active')
                }
                inputs[index].addEventListener('input',function refresacar(){
                    let inputs=document.getElementsByClassName('input')
                    
                    let activo=busacarClase(inputs,'Active')
                    
                    if(activo==0){
                        pasado=1
                    }else{
                        pasado=0
                    }
                    inputs[pasado].value=''

                    activo=parseFloat(activo)
                    let incremento=0,decremento=0;
                    if (activo!=0){
                        console.log('INCREMENTO ACTIVO');
                        incremento=2
                    }
                    // numerador=window.razones[2-incremento]/window.razones[0+incremento]
                    // denominador=window.razones[3-incremento]/window.razones[2+incremento1]

                    numerador=window.razones[2-incremento]/window.razones[0+incremento]
                    // denominador=window.razones[pasado+2]/window.razones[pasado]
                    if(window.razones[1]==null){
                        denominador=1
                    }else{
                        // denominador=window.razones[pasado+2]/window.razones[pasado]
                        denominador=Math.pow(window.razones[3-incremento],window.exponentes[3-incremento])/Math.pow(window.razones[1+incremento],window.exponentes[1+incremento])
                    }
                    // numerador=Math.pow(window.razones[activo+2],window.exponentes[activo+2])/Math.pow(window.razones[activo],window.exponentes[activo])
                    // if(window.razones[pasado]==null){
                    //     denominador=1
                    // }else{
                    //     denominador=Math.pow(window.razones[pasado+2],window.exponentes[pasado+2])/Math.pow(window.razones[pasado],window.exponentes[pasado])
                    // }
                    console.log(numerador+'/'+denominador);
                    inputs[pasado].value=parseFloat(inputs[activo].value)*numerador/denominador
                    // input 0
                        // let numerador=window.razones[2]/window.razones[0]
                        // let denominador=window.razones[3]/window.razones[1]
                    // input 1
                        // let numerador=window.razones[0]/window.razones[2]
                        // let denominador=window.razones[1]/window.razones[3]

                })
            }
        }
        let IndexOption=[];
        let numerador,denominador;

        function convertirUnidad(cantidad, FactorBase,FactorDestino){

        }

        conversionAuto()
    </script>

    <!-- <script src="JS/bloquear_None.js"></script> -->
</html>